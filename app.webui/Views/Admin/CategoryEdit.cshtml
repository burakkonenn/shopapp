@model ModelCategory

<h2>CategoryEdit</h2>
<hr>
<a asp-controller="Admin" asp-action="CategoryCreate" class="btn btn-secondary btn-sm mb-3">Add Category</a>
<hr>
<div class="row">
    <div class="col-md-3">
        <form action="" method="POST">
            <div class="form-group">
                <input type="hidden" name="CategoryId" value="@Model.CategoryId">

                <label asp-for="Name" class="form-label"></label>
                <input asp-for="Name" class="form-control">
                <span asp-validation-for="Name"></span>
            </div>
            <div class="form-group">
                <label asp-for="Url" class="form-label"></label>
                <input asp-for="Url" class="form-control">
                <span asp-validation-for="Url"></span>
            </div>

            <button class="mt-3 btn btn-info btn-sm">Save Changes</button>
            <div id="products">

            @for (int i = 0; i < Model.Products.Count; i++)
            {
                <input type="hidden" name="Products[@i].ProductId" value="@Model.Products[@i].Id">
                <input type="hidden" name="Products[@i].ImageUrl" value="@Model.Products[@i].Image">
                <input type="hidden" name="Products[@i].Name" value="@Model.Products[@i].Name">
                <input type="hidden" name="Products[@i].Price" value="@Model.Products[@i].Price">
                <input type="hidden" name="Products[@i].IsApproved" value="@Model.Products[@i].IsApproved.ToString()">                                   
            }

        </div>
        </form>
    </div>
    <div class="col-md-9">
        <table class="table table-hover table table-striped table-sm">
            <thead>
                <tr>
                    <td>Id</td>
                    <td>Name</td>
                    <td>Price</td>
                    <td>Image</td>
                    <td></td>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Products)
                {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.Name</td>
                        <td>@item.Price</td>
                        <td><img src="~/img/@item.Image" width="80" alt=""></td>
                        <td>
                            <a href="/admin/products/@item.Id" class="btn btn-info btn-sm float-end">Edit</a>
                            <form asp-controller="Admin" asp-action="DeleteFromCategory">
                               <input type="hidden" name="productId" value="@item.Id">
                                <input type="hidden" name="categoryId" value="@Model.CategoryId">
                                <button class="btn btn-secondary btn-sm float-end">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>